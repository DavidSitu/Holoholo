#include <iostream>
#include <string>
#include <cstdlib>
#include <ctime>
#include <cmath>
#include <android/sensor.h>
#include <android/looper.h>
#include <android/log.h>
#include <android_native_app_glue.h>
#include <jni.h>
#include <unistd.h>
#include <pthread.h>
#include <errno.h>

using namespace std;

class LocationListener : public android::LocationListener {
public:
    virtual void onLocationChanged(const android::Location& location) {
        double latitude = location.getLatitude();
        double longitude = location.getLongitude();
        double accuracy = location.getAccuracy();

        __android_log_print(ANDROID_LOG_INFO, "LocationListener", "Latitude: %f", latitude);
        __android_log_print(ANDROID_LOG_INFO, "LocationListener", "Longitude: %f", longitude);
        __android_log_print(ANDROID_LOG_INFO, "LocationListener", "Accuracy: %f", accuracy);
    }
};

void get_location() {
    android::sp<android::LocationManager> locationManager = android::LocationManager::create();
    android::sp<LocationListener> locationListener = new LocationListener();

    locationManager->requestLocationUpdates(android::LocationManager::GPS_PROVIDER, 0, 0, locationListener);
}
